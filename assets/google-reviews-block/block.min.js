!function(e,t,o,i,n,r){const{registerBlockType:l}=e,{createElement:a,Component:s}=t,{InspectorControls:g,FontSizePicker:u,PanelColorSettings:d}=o,{PanelBody:v,ToggleControl:c,SelectControl:m,ColorPicker:w,RangeControl:p,TextControl:C}=i,{__:S}=n,{useSelect:h}=r;l("google-reviews/display",{title:S("Google Reviews"),description:S("Display your Google business reviews with overall rating"),icon:"star-filled",category:"widgets",keywords:[S("google"),S("reviews"),S("rating"),S("business")],attributes:{showLink:{type:"boolean",default:!0},showReviewContent:{type:"boolean",default:!1},maxReviews:{type:"number",default:5},alignment:{type:"string",default:"left"},backgroundColor:{type:"string",default:"#f9f9f9"},textColor:{type:"string",default:"#333333"},titleTextColor:{type:"string",default:""},titleBackgroundColor:{type:"string",default:""},ratingTextColor:{type:"string",default:""},ratingBackgroundColor:{type:"string",default:""},reviewsTextColor:{type:"string",default:""},reviewsBackgroundColor:{type:"string",default:""},reviewsSort:{type:"string",default:"most_relevant"},overrideUrl:{type:"string",default:""},overrideTitle:{type:"string",default:""},customRatingText:{type:"string",default:""},showTitle:{type:"boolean",default:!0},showRatingText:{type:"boolean",default:!0},ratingTextBelow:{type:"boolean",default:!1},titleFontSize:{type:"string",default:""},titleFontSizeCustom:{type:"number",default:null},ratingTextFontSize:{type:"string",default:""},ratingTextFontSizeCustom:{type:"number",default:null},reviewsFontSize:{type:"string",default:""},reviewsFontSizeCustom:{type:"number",default:null},reviewTimeFontSize:{type:"string",default:""},reviewTimeFontSizeCustom:{type:"number",default:null},reviewTimeTextColor:{type:"string",default:""},reviewTimeBackgroundColor:{type:"string",default:""},starsFontSize:{type:"string",default:""},starsFontSizeCustom:{type:"number",default:null},starsTextColor:{type:"string",default:""},starsBackgroundColor:{type:"string",default:""}},edit:class extends s{constructor(e){super(e),this.state={reviews:null,loading:!0,error:null}}formatReviewTime(e){const t=new Date(1e3*e),o=new Date,i=Math.floor((o-t)/864e5);return i<7?0===i?"Today":1===i?"Yesterday":i+" days ago":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}componentDidMount(){const{attributes:e}=this.props,{reviewsSort:t}=e;this.fetchReviews(t)}componentDidUpdate(e){const{attributes:t}=this.props,{reviewsSort:o}=t;e.attributes.reviewsSort!==o&&(this.setState({loading:!0}),this.fetchReviews(o))}fetchReviews(e=null){const t=new FormData;t.append("action","get_google_reviews"),t.append("nonce",googleReviewsAjax.nonce),e&&t.append("sort_by",e),fetch(googleReviewsAjax.ajax_url,{method:"POST",body:t}).then(e=>e.json()).then(e=>{e.success?this.setState({reviews:e.data,loading:!1}):this.setState({error:e.data||"Failed to load reviews",loading:!1})}).catch(e=>{this.setState({error:"Network error",loading:!1})})}renderStars(e,t,o){const i=[],n=t||"#ffc107",r="#ddd";for(let t=1;t<=5;t++){let l="star empty",s={color:r,...o&&{fontSize:o}};t<=e?(l="star filled",s={color:n,...o&&{fontSize:o}}):t-.5<=e&&(l="star half",s={background:`linear-gradient(90deg, ${n} 50%, ${r} 50%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",...o&&{fontSize:o}}),i.push(a("span",{key:t,className:l,style:s},"â˜…"))}return i}render(){const{attributes:e,setAttributes:t}=this.props,{showLink:o,showReviewContent:i,maxReviews:n,alignment:r,backgroundColor:l,textColor:s,reviewsSort:w,overrideUrl:h,overrideTitle:f,customRatingText:y,showTitle:T,showRatingText:z,ratingTextBelow:x,titleFontSize:b,titleFontSizeCustom:k,ratingTextFontSize:F,ratingTextFontSizeCustom:R,reviewsFontSize:_,reviewsFontSizeCustom:B,reviewTimeFontSize:N,reviewTimeFontSizeCustom:L,starsFontSize:D,starsFontSizeCustom:M,titleTextColor:E,titleBackgroundColor:O,ratingTextColor:H,ratingBackgroundColor:U,reviewsTextColor:A,reviewsBackgroundColor:G,reviewTimeTextColor:I,reviewTimeBackgroundColor:P,starsTextColor:$,starsBackgroundColor:j}=e,{reviews:W,loading:q,error:Y}=this.state,X=wp.data.select("core/editor")&&wp.data.select("core/editor").getEditorSettings().fontSizes||wp.data.select("core/block-editor")&&wp.data.select("core/block-editor").getSettings().fontSizes||[{name:S("Small"),size:"0.9rem",slug:"small"},{name:S("Medium"),size:"1.05rem",slug:"medium"},{name:S("Large"),size:"1.85rem",slug:"large"},{name:S("Extra Large"),size:"2.5rem",slug:"x-large"},{name:S("Extra Extra Large"),size:"3.27rem",slug:"xx-large"}],J=(e,t)=>{if(t)return{fontSize:t+"px"};if(e){const t=X.find(t=>t.slug===e);return t?{fontSize:t.size}:{}}return{}},K=e=>e?"has-"+e+"-font-size":"",Q={...J(b,k),...E&&{color:E},...O&&{backgroundColor:O}},V=K(b),Z={...J(F,R),...H&&{color:H}},ee=K(F),te={...U&&{backgroundColor:U}},oe={...J(_,B),...A&&{color:A},...G&&{backgroundColor:G}},ie=K(_),ne={...J(N,L),...I&&{color:I},...P&&{backgroundColor:P}},re=K(N),le={...J(D,M),...$&&{color:$},...j&&{backgroundColor:j}},ae=K(D),se=le.fontSize,ge=a(g,{},a(v,{title:S("Display Settings"),initialOpen:!0},a(c,{label:S("Show Title"),checked:!1!==T,onChange:e=>t({showTitle:e})}),!1!==T&&a(C,{label:S("Override Title (optional)"),value:f||"",onChange:e=>t({overrideTitle:e}),placeholder:S("Enter custom title to override business name"),help:S("Leave empty to use business name from settings")}),a(c,{label:S("Show Rating Text"),checked:!1!==z,onChange:e=>t({showRatingText:e})}),!1!==z&&a(c,{label:S("Show Rating Text Below Stars"),checked:!0===x,onChange:e=>t({ratingTextBelow:e}),help:S("Display the rating text on a new line below the stars instead of inline")}),!1!==z&&a(C,{label:S("Custom Rating Text (optional)"),value:y||"",onChange:e=>t({customRatingText:e}),placeholder:S("e.g., Based on $review_count customer reviews"),help:S('Use $review_count where you want the review count to appear. HTML allowed: <p>, <a>, <br>, <strong>, <em>. Leave empty for default "(X reviews)" format.')}),a(c,{label:S("Show Google Link"),checked:o,onChange:e=>t({showLink:e})}),o&&a(C,{label:S("Override URL (optional)"),value:h||"",onChange:e=>t({overrideUrl:e}),placeholder:S("Enter custom URL to override Google Reviews URL"),help:S("Leave empty to use Google-provided URL")}),a(c,{label:S("Show Individual Reviews"),checked:i,onChange:e=>t({showReviewContent:e})}),i&&a(p,{label:S("Max Reviews to Show (Google API limit: 5)"),value:n,onChange:e=>t({maxReviews:e}),min:1,max:5}),i&&a(m,{label:S("Sort Reviews By"),value:w||"most_relevant",options:[{label:"Most Relevant",value:"most_relevant"},{label:"Most Recent",value:"newest"}],onChange:e=>t({reviewsSort:e})}))),ue=a(g,{group:"styles"},a(v,{title:S("Typography"),initialOpen:!1},a("h4",{style:{marginBottom:"10px"}},S("Title Font Size")),a(u,{__next40pxDefaultSize:!0,fontSizes:X,value:k||(b?X.find(e=>e.slug===b)?.size:void 0),onChange:e=>{const o=X.find(t=>t.size===e);o?t({titleFontSize:o.slug,titleFontSizeCustom:void 0}):"number"==typeof e?t({titleFontSize:"",titleFontSizeCustom:e}):void 0===e&&t({titleFontSize:"",titleFontSizeCustom:void 0})}}),a("h4",{style:{marginTop:"20px",marginBottom:"10px"}},S("Rating Text Font Size")),a(u,{__next40pxDefaultSize:!0,fontSizes:X,value:R||(F?X.find(e=>e.slug===F)?.size:void 0),onChange:e=>{const o=X.find(t=>t.size===e);o?t({ratingTextFontSize:o.slug,ratingTextFontSizeCustom:void 0}):"number"==typeof e?t({ratingTextFontSize:"",ratingTextFontSizeCustom:e}):void 0===e&&t({ratingTextFontSize:"",ratingTextFontSizeCustom:void 0})}}),a("h4",{style:{marginTop:"20px",marginBottom:"10px"}},S("Reviews Font Size")),a(u,{__next40pxDefaultSize:!0,fontSizes:X,value:B||(_?X.find(e=>e.slug===_)?.size:void 0),onChange:e=>{const o=X.find(t=>t.size===e);o?t({reviewsFontSize:o.slug,reviewsFontSizeCustom:void 0}):"number"==typeof e?t({reviewsFontSize:"",reviewsFontSizeCustom:e}):void 0===e&&t({reviewsFontSize:"",reviewsFontSizeCustom:void 0})}}),a("h4",{style:{marginTop:"20px",marginBottom:"10px"}},S("Review Time Font Size")),a(u,{__next40pxDefaultSize:!0,fontSizes:X,value:L||(N?X.find(e=>e.slug===N)?.size:void 0),onChange:e=>{const o=X.find(t=>t.size===e);o?t({reviewTimeFontSize:o.slug,reviewTimeFontSizeCustom:void 0}):"number"==typeof e?t({reviewTimeFontSize:"",reviewTimeFontSizeCustom:e}):void 0===e&&t({reviewTimeFontSize:"",reviewTimeFontSizeCustom:void 0})}}),a("h4",{style:{marginTop:"20px",marginBottom:"10px"}},S("Stars Font Size")),a(u,{__next40pxDefaultSize:!0,fontSizes:X,value:M||(D?X.find(e=>e.slug===D)?.size:void 0),onChange:e=>{const o=X.find(t=>t.size===e);o?t({starsFontSize:o.slug,starsFontSizeCustom:void 0}):"number"==typeof e?t({starsFontSize:"",starsFontSizeCustom:e}):void 0===e&&t({starsFontSize:"",starsFontSizeCustom:void 0})}})),a(v,{title:S("Colors"),initialOpen:!1},a(d,{title:S("Color Settings"),initialOpen:!1,colorSettings:[{value:l,onChange:e=>t({backgroundColor:e}),label:S("Block Background Color")},{value:s,onChange:e=>t({textColor:e}),label:S("Default Text Color")}]}),a(d,{title:S("Title Colors"),initialOpen:!1,colorSettings:[{value:E,onChange:e=>t({titleTextColor:e}),label:S("Title Text Color")},{value:O,onChange:e=>t({titleBackgroundColor:e}),label:S("Title Background Color")}]}),a(d,{title:S("Rating Colors"),initialOpen:!1,colorSettings:[{value:H,onChange:e=>t({ratingTextColor:e}),label:S("Rating Text Color")},{value:U,onChange:e=>t({ratingBackgroundColor:e}),label:S("Rating Background Color")}]}),a(d,{title:S("Reviews Colors"),initialOpen:!1,colorSettings:[{value:A,onChange:e=>t({reviewsTextColor:e}),label:S("Reviews Text Color")},{value:G,onChange:e=>t({reviewsBackgroundColor:e}),label:S("Reviews Background Color")}]}),a(d,{title:S("Review Time Colors"),initialOpen:!1,colorSettings:[{value:I,onChange:e=>t({reviewTimeTextColor:e}),label:S("Review Time Text Color")},{value:P,onChange:e=>t({reviewTimeBackgroundColor:e}),label:S("Review Time Background Color")}]}),a(d,{title:S("Stars Colors"),initialOpen:!1,colorSettings:[{value:$,onChange:e=>t({starsTextColor:e}),label:S("Stars Color")},{value:j,onChange:e=>t({starsBackgroundColor:e}),label:S("Stars Background Color")}]})));return q?[ge,ue,a("div",{className:"google-reviews-block loading",style:{backgroundColor:l,color:s}},S("Loading Google Reviews..."))]:Y?[ge,ue,a("div",{className:"google-reviews-block error",style:{backgroundColor:l,color:s,textAlign:r}},a("p",{},S("Error: ")+Y),a("p",{},S("Please check your settings in Settings â†’ Google Reviews")))]:[ge,ue,a("div",{className:"google-reviews-block",style:{backgroundColor:l,color:s}},!1!==T?a("div",{className:"review-header"},a("h3",{className:V,style:Q,dangerouslySetInnerHTML:{__html:this.sanitizeHtml(f||W.name)}})):null,a("div",{className:"review-rating",style:te},a("span",{className:"rating-number"},W.rating.toFixed(1)),a("span",{className:"stars "+ae,style:le},this.renderStars(W.rating,$,se)),!1===z||x?null:y?a("span",{className:"rating-count "+ee,style:Z,dangerouslySetInnerHTML:{__html:this.sanitizeHtml(y.replace("$review_count",W.total_ratings))}}):a("span",{className:"rating-count "+ee,style:Z},"("+W.total_ratings+" reviews)")),!1!==z&&x?y?a("div",{className:"rating-count-below "+ee,style:Z,dangerouslySetInnerHTML:{__html:this.sanitizeHtml(y.replace("$review_count",W.total_ratings))}}):a("div",{className:"rating-count-below "+ee,style:Z},"("+W.total_ratings+" reviews)"):null,i&&W&&W.reviews&&W.reviews.length>0?a("div",{className:"reviews-container"},a("div",{className:"reviews-sort-info"},a("small",{},"Sorted by: "+("newest"===w?"Most Recent":"Most Relevant"))),a("div",{className:"individual-reviews "+ie,style:oe},W.reviews.slice(0,n).map((e,t)=>a("div",{key:t,className:"review-item"},a("div",{className:"review-header"},a("div",{className:"reviewer-info"},e.profile_photo_url?a("img",{src:e.profile_photo_url,alt:e.author_name,className:"reviewer-photo"}):null,a("div",{className:"reviewer-details"},a("span",{className:"reviewer-name",style:oe},e.author_name),a("div",{className:"review-rating-individual"},a("div",{className:"stars "+ae,style:le},this.renderStars(e.rating,$,se)),a("span",{className:"review-time "+re,style:ne},this.formatReviewTime(e.time)))))),e.text?a("div",{className:"review-text",style:oe,dangerouslySetInnerHTML:{__html:e.text.replace(/\n/g,"<br />")}}):null)))):null,o&&(h||W&&W.url)?a("div",{className:"review-link"},a("a",{href:h||W.url,target:"_blank",rel:"noopener"},S("See All Reviews on Google"))):null)]}sanitizeHtml(e){const t=document.createElement("div");t.innerHTML=e;t.querySelectorAll("script, style, iframe, object, embed").forEach(e=>e.remove());return t.querySelectorAll("*").forEach(e=>{for(let t of e.attributes)t.name.startsWith("on")&&e.removeAttribute(t.name)}),t.innerHTML}formatReviewTime(e){const t=new Date(1e3*e),o=new Date,i=Math.floor((o-t)/864e5);return i<7?0===i?"Today":1===i?"Yesterday":i+" days ago":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}},save:function(){return null}})}(window.wp.blocks,window.wp.element,window.wp.blockEditor||window.wp.editor,window.wp.components,window.wp.i18n,window.wp.data);
//# sourceMappingURL=block.min.js.map
