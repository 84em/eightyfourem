{"version":3,"file":"block.min.js","names":["blocks","element","blockEditor","components","i18n","data","registerBlockType","createElement","Component","InspectorControls","FontSizePicker","PanelColorSettings","PanelBody","ToggleControl","SelectControl","ColorPicker","RangeControl","TextControl","__","useSelect","title","description","icon","category","keywords","attributes","showLink","type","default","showReviewContent","maxReviews","alignment","backgroundColor","textColor","titleTextColor","titleBackgroundColor","ratingTextColor","ratingBackgroundColor","reviewsTextColor","reviewsBackgroundColor","reviewsSort","overrideUrl","overrideTitle","customRatingText","showTitle","showRatingText","ratingTextBelow","titleFontSize","titleFontSizeCustom","ratingTextFontSize","ratingTextFontSizeCustom","reviewsFontSize","reviewsFontSizeCustom","reviewTimeFontSize","reviewTimeFontSizeCustom","reviewTimeTextColor","reviewTimeBackgroundColor","starsFontSize","starsFontSizeCustom","starsTextColor","starsBackgroundColor","edit","constructor","props","super","this","state","reviews","loading","error","formatReviewTime","timestamp","reviewDate","Date","now","daysAgo","Math","floor","toLocaleDateString","year","month","day","componentDidMount","fetchReviews","componentDidUpdate","prevProps","setState","sortBy","formData","FormData","append","googleReviewsAjax","nonce","fetch","ajax_url","method","body","then","response","json","success","catch","renderStars","rating","starColor","fontSize","stars","filledColor","emptyColor","i","starClass","starStyle","color","background","WebkitBackgroundClip","WebkitTextFillColor","backgroundClip","push","key","className","style","render","setAttributes","fontSizes","wp","select","getEditorSettings","getSettings","name","size","slug","getTypographyStyle","fontSizeCustom","fontSizeObj","find","fs","getTypographyClass","titleStyle","titleClass","ratingTextStyle","ratingTextClass","ratingSectionStyle","reviewsStyle","reviewsClass","reviewTimeStyle","reviewTimeClass","starsStyle","starsClass","starsFontSizeValue","inspectorControls","initialOpen","label","checked","onChange","value","placeholder","help","min","max","options","styleControls","group","marginBottom","__next40pxDefaultSize","undefined","newFontSize","preset","marginTop","colorSettings","textAlign","dangerouslySetInnerHTML","__html","sanitizeHtml","toFixed","replace","total_ratings","length","slice","map","review","index","profile_photo_url","src","alt","author_name","time","text","url","href","target","rel","html","tempDiv","document","innerHTML","querySelectorAll","forEach","el","remove","attr","startsWith","removeAttribute","save","window","editor"],"sources":["block.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function(blocks, element, blockEditor, components, i18n, data) {\n\tconst { registerBlockType } = blocks;\n\tconst { createElement, Component } = element;\n\tconst { InspectorControls, FontSizePicker, PanelColorSettings } = blockEditor;\n\tconst { PanelBody, ToggleControl, SelectControl, ColorPicker, RangeControl, TextControl } = components;\n\tconst { __ } = i18n;\n\tconst { useSelect } = data;\n\n\tclass GoogleReviewsEdit extends Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\treviews: null,\n\t\t\t\tloading: true,\n\t\t\t\terror: null\n\t\t\t}\n\t\t}\n\n\t\tformatReviewTime(timestamp) {\n\t\t\tconst reviewDate = new Date(timestamp * 1000);\n\t\t\tconst now = new Date();\n\t\t\tconst daysAgo = Math.floor((now - reviewDate) / (24 * 60 * 60 * 1000));\n\n\t\t\tif (daysAgo < 7) {\n\t\t\t\tif (daysAgo === 0) {\n\t\t\t\t\treturn 'Today';\n\t\t\t\t} else if (daysAgo === 1) {\n\t\t\t\t\treturn 'Yesterday';\n\t\t\t\t} else {\n\t\t\t\t\treturn daysAgo + ' days ago';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn reviewDate.toLocaleDateString('en-US', {\n\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\tmonth: 'long',\n\t\t\t\t\tday: 'numeric'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tcomponentDidMount() {\n\t\t\tconst { attributes } = this.props;\n\t\t\tconst { reviewsSort } = attributes;\n\t\t\tthis.fetchReviews(reviewsSort);\n\t\t}\n\n\t\tcomponentDidUpdate(prevProps) {\n\t\t\tconst { attributes } = this.props;\n\t\t\tconst { reviewsSort } = attributes;\n\t\t\tif (prevProps.attributes.reviewsSort !== reviewsSort) {\n\t\t\t\tthis.setState({ loading: true });\n\t\t\t\tthis.fetchReviews(reviewsSort);\n\t\t\t}\n\t\t}\n\n\t\tfetchReviews(sortBy = null) {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('action', 'get_google_reviews');\n\t\t\tformData.append('nonce', googleReviewsAjax.nonce);\n\t\t\tif (sortBy) {\n\t\t\t\tformData.append('sort_by', sortBy);\n\t\t\t}\n\n\t\t\tfetch(googleReviewsAjax.ajax_url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: formData\n\t\t\t})\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(data => {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\treviews: data.data,\n\t\t\t\t\t\t\tloading: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\terror: data.data || 'Failed to load reviews',\n\t\t\t\t\t\t\tloading: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terror: 'Network error',\n\t\t\t\t\t\tloading: false\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\trenderStars(rating, starColor, fontSize) {\n\t\t\tconst stars = [];\n\t\t\tconst filledColor = starColor || '#ffc107';\n\t\t\tconst emptyColor = '#ddd';\n\t\t\t\n\t\t\tfor (let i = 1; i <= 5; i++) {\n\t\t\t\tlet starClass = 'star empty';\n\t\t\t\tlet starStyle = { \n\t\t\t\t\tcolor: emptyColor,\n\t\t\t\t\t...(fontSize && { fontSize: fontSize })\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif (i <= rating) {\n\t\t\t\t\tstarClass = 'star filled';\n\t\t\t\t\tstarStyle = { \n\t\t\t\t\t\tcolor: filledColor,\n\t\t\t\t\t\t...(fontSize && { fontSize: fontSize })\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (i - 0.5 <= rating) {\n\t\t\t\t\tstarClass = 'star half';\n\t\t\t\t\tstarStyle = {\n\t\t\t\t\t\tbackground: `linear-gradient(90deg, ${filledColor} 50%, ${emptyColor} 50%)`,\n\t\t\t\t\t\tWebkitBackgroundClip: 'text',\n\t\t\t\t\t\tWebkitTextFillColor: 'transparent',\n\t\t\t\t\t\tbackgroundClip: 'text',\n\t\t\t\t\t\t...(fontSize && { fontSize: fontSize })\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tstars.push(\n\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\tkey: i,\n\t\t\t\t\t\tclassName: starClass,\n\t\t\t\t\t\tstyle: starStyle\n\t\t\t\t\t}, '★')\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn stars;\n\t\t}\n\n\t\trender() {\n\t\t\tconst { attributes, setAttributes } = this.props;\n\t\t\tconst { \n\t\t\t\tshowLink, showReviewContent, maxReviews, alignment, backgroundColor, textColor, reviewsSort, \n\t\t\t\toverrideUrl, overrideTitle, customRatingText, showTitle, showRatingText, ratingTextBelow,\n\t\t\t\ttitleFontSize, titleFontSizeCustom, ratingTextFontSize, ratingTextFontSizeCustom, \n\t\t\t\treviewsFontSize, reviewsFontSizeCustom, reviewTimeFontSize, reviewTimeFontSizeCustom,\n\t\t\t\tstarsFontSize, starsFontSizeCustom,\n\t\t\t\ttitleTextColor, titleBackgroundColor, ratingTextColor, ratingBackgroundColor, \n\t\t\t\treviewsTextColor, reviewsBackgroundColor, reviewTimeTextColor, reviewTimeBackgroundColor,\n\t\t\t\tstarsTextColor, starsBackgroundColor\n\t\t\t} = attributes;\n\t\t\tconst { reviews, loading, error } = this.state;\n\t\t\t\n\t\t\t// Get theme font sizes - use proper theme.json values\n\t\t\tconst fontSizes = wp.data.select('core/editor') && wp.data.select('core/editor').getEditorSettings().fontSizes \n\t\t\t\t|| wp.data.select('core/block-editor') && wp.data.select('core/block-editor').getSettings().fontSizes \n\t\t\t\t|| [\n\t\t\t\t\t{ name: __('Small'), size: '0.9rem', slug: 'small' },\n\t\t\t\t\t{ name: __('Medium'), size: '1.05rem', slug: 'medium' },\n\t\t\t\t\t{ name: __('Large'), size: '1.85rem', slug: 'large' },\n\t\t\t\t\t{ name: __('Extra Large'), size: '2.5rem', slug: 'x-large' },\n\t\t\t\t\t{ name: __('Extra Extra Large'), size: '3.27rem', slug: 'xx-large' },\n\t\t\t\t];\n\t\t\t\n\t\t\t// Helper function to get typography styles\n\t\t\tconst getTypographyStyle = (fontSize, fontSizeCustom) => {\n\t\t\t\tif (fontSizeCustom) {\n\t\t\t\t\treturn { fontSize: fontSizeCustom + 'px' };\n\t\t\t\t} else if (fontSize) {\n\t\t\t\t\t// Find the actual size from fontSizes array\n\t\t\t\t\tconst fontSizeObj = fontSizes.find(fs => fs.slug === fontSize);\n\t\t\t\t\treturn fontSizeObj ? { fontSize: fontSizeObj.size } : {};\n\t\t\t\t}\n\t\t\t\treturn {};\n\t\t\t};\n\t\t\t\n\t\t\t// Helper function to get typography class\n\t\t\tconst getTypographyClass = (fontSize) => {\n\t\t\t\treturn fontSize ? 'has-' + fontSize + '-font-size' : '';\n\t\t\t};\n\t\t\t\n\t\t\t// Title styles with individual colors\n\t\t\tconst titleStyle = {\n\t\t\t\t...getTypographyStyle(titleFontSize, titleFontSizeCustom),\n\t\t\t\t...(titleTextColor && { color: titleTextColor }),\n\t\t\t\t...(titleBackgroundColor && { backgroundColor: titleBackgroundColor })\n\t\t\t};\n\t\t\tconst titleClass = getTypographyClass(titleFontSize);\n\t\t\t\n\t\t\t// Rating text styles with individual colors\n\t\t\tconst ratingTextStyle = {\n\t\t\t\t...getTypographyStyle(ratingTextFontSize, ratingTextFontSizeCustom),\n\t\t\t\t...(ratingTextColor && { color: ratingTextColor })\n\t\t\t};\n\t\t\tconst ratingTextClass = getTypographyClass(ratingTextFontSize);\n\t\t\t\n\t\t\t// Rating section style (for background color)\n\t\t\tconst ratingSectionStyle = {\n\t\t\t\t...(ratingBackgroundColor && { backgroundColor: ratingBackgroundColor })\n\t\t\t};\n\t\t\t\n\t\t\t// Reviews styles with individual colors\n\t\t\tconst reviewsStyle = {\n\t\t\t\t...getTypographyStyle(reviewsFontSize, reviewsFontSizeCustom),\n\t\t\t\t...(reviewsTextColor && { color: reviewsTextColor }),\n\t\t\t\t...(reviewsBackgroundColor && { backgroundColor: reviewsBackgroundColor })\n\t\t\t};\n\t\t\tconst reviewsClass = getTypographyClass(reviewsFontSize);\n\t\t\t\n\t\t\t// Review time styles with individual colors\n\t\t\tconst reviewTimeStyle = {\n\t\t\t\t...getTypographyStyle(reviewTimeFontSize, reviewTimeFontSizeCustom),\n\t\t\t\t...(reviewTimeTextColor && { color: reviewTimeTextColor }),\n\t\t\t\t...(reviewTimeBackgroundColor && { backgroundColor: reviewTimeBackgroundColor })\n\t\t\t};\n\t\t\tconst reviewTimeClass = getTypographyClass(reviewTimeFontSize);\n\t\t\t\n\t\t\t// Stars styles with individual colors\n\t\t\tconst starsStyle = {\n\t\t\t\t...getTypographyStyle(starsFontSize, starsFontSizeCustom),\n\t\t\t\t...(starsTextColor && { color: starsTextColor }),\n\t\t\t\t...(starsBackgroundColor && { backgroundColor: starsBackgroundColor })\n\t\t\t};\n\t\t\tconst starsClass = getTypographyClass(starsFontSize);\n\t\t\t// Get the actual font size value for stars\n\t\t\tconst starsFontSizeValue = starsStyle.fontSize;\n\n\t\t\t// Settings tab controls\n\t\t\tconst inspectorControls = createElement(InspectorControls, {},\n\t\t\t\tcreateElement(PanelBody, {\n\t\t\t\t\t\ttitle: __('Display Settings'),\n\t\t\t\t\t\tinitialOpen: true\n\t\t\t\t\t},\n\t\t\t\t\tcreateElement(ToggleControl, {\n\t\t\t\t\t\tlabel: __('Show Title'),\n\t\t\t\t\t\tchecked: showTitle !== false,\n\t\t\t\t\t\tonChange: (value) => setAttributes({ showTitle: value })\n\t\t\t\t\t}),\n\t\t\t\t\tshowTitle !== false && createElement(TextControl, {\n\t\t\t\t\t\tlabel: __('Override Title (optional)'),\n\t\t\t\t\t\tvalue: overrideTitle || '',\n\t\t\t\t\t\tonChange: (value) => setAttributes({ overrideTitle: value }),\n\t\t\t\t\t\tplaceholder: __('Enter custom title to override business name'),\n\t\t\t\t\t\thelp: __('Leave empty to use business name from settings')\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(ToggleControl, {\n\t\t\t\t\t\tlabel: __('Show Rating Text'),\n\t\t\t\t\t\tchecked: showRatingText !== false,\n\t\t\t\t\t\tonChange: (value) => setAttributes({ showRatingText: value })\n\t\t\t\t\t}),\n\t\t\t\t\tshowRatingText !== false && createElement(ToggleControl, {\n\t\t\t\t\t\tlabel: __('Show Rating Text Below Stars'),\n\t\t\t\t\t\tchecked: ratingTextBelow === true,\n\t\t\t\t\t\tonChange: (value) => setAttributes({ ratingTextBelow: value }),\n\t\t\t\t\t\thelp: __('Display the rating text on a new line below the stars instead of inline')\n\t\t\t\t\t}),\n\t\t\t\t\tshowRatingText !== false && createElement(TextControl, {\n\t\t\t\t\t\tlabel: __('Custom Rating Text (optional)'),\n\t\t\t\t\t\tvalue: customRatingText || '',\n\t\t\t\t\t\tonChange: (value) => setAttributes({ customRatingText: value }),\n\t\t\t\t\t\tplaceholder: __('e.g., Based on $review_count customer reviews'),\n\t\t\t\t\t\thelp: __('Use $review_count where you want the review count to appear. HTML allowed: <p>, <a>, <br>, <strong>, <em>. Leave empty for default \"(X reviews)\" format.')\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(ToggleControl, {\n\t\t\t\t\t\tlabel: __('Show Google Link'),\n\t\t\t\t\t\tchecked: showLink,\n\t\t\t\t\t\tonChange: (value) => setAttributes({ showLink: value })\n\t\t\t\t\t}),\n\t\t\t\t\tshowLink && createElement(TextControl, {\n\t\t\t\t\t\tlabel: __('Override URL (optional)'),\n\t\t\t\t\t\tvalue: overrideUrl || '',\n\t\t\t\t\t\tonChange: (value) => setAttributes({ overrideUrl: value }),\n\t\t\t\t\t\tplaceholder: __('Enter custom URL to override Google Reviews URL'),\n\t\t\t\t\t\thelp: __('Leave empty to use Google-provided URL')\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(ToggleControl, {\n\t\t\t\t\t\tlabel: __('Show Individual Reviews'),\n\t\t\t\t\t\tchecked: showReviewContent,\n\t\t\t\t\t\tonChange: (value) => setAttributes({ showReviewContent: value })\n\t\t\t\t\t}                    ),\n\t\t\t\t\tshowReviewContent && createElement(RangeControl, {\n\t\t\t\t\t\tlabel: __('Max Reviews to Show (Google API limit: 5)'),\n\t\t\t\t\t\tvalue: maxReviews,\n\t\t\t\t\t\tonChange: (value) => setAttributes({ maxReviews: value }),\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 5\n\t\t\t\t\t}),\n\t\t\t\t\tshowReviewContent && createElement(SelectControl, {\n\t\t\t\t\t\tlabel: __('Sort Reviews By'),\n\t\t\t\t\t\tvalue: reviewsSort || 'most_relevant',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{ label: 'Most Relevant', value: 'most_relevant' },\n\t\t\t\t\t\t\t{ label: 'Most Recent', value: 'newest' }\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonChange: (value) => setAttributes({ reviewsSort: value })\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t);\n\t\t\t\n\t\t\t// Styles tab controls\n\t\t\tconst styleControls = createElement(InspectorControls, { group: 'styles' },\n\t\t\t\tcreateElement(PanelBody, {\n\t\t\t\t\t\ttitle: __('Typography'),\n\t\t\t\t\t\tinitialOpen: false\n\t\t\t\t\t},\n\t\t\t\t\tcreateElement('h4', { style: { marginBottom: '10px' } }, __('Title Font Size')),\n\t\t\t\t\tcreateElement(FontSizePicker, {\n\t\t\t\t\t\t__next40pxDefaultSize: true,\n\t\t\t\t\t\tfontSizes: fontSizes,\n\t\t\t\t\t\tvalue: titleFontSizeCustom || (titleFontSize ? fontSizes.find(fs => fs.slug === titleFontSize)?.size : undefined),\n\t\t\t\t\t\tonChange: (newFontSize) => {\n\t\t\t\t\t\t\t// Handle preset font sizes (string values like '0.9rem')\n\t\t\t\t\t\t\tconst preset = fontSizes.find(fs => fs.size === newFontSize);\n\t\t\t\t\t\t\tif (preset) {\n\t\t\t\t\t\t\t\t// Preset selected - store the slug\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\ttitleFontSize: preset.slug,\n\t\t\t\t\t\t\t\t\ttitleFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (typeof newFontSize === 'number') {\n\t\t\t\t\t\t\t\t// Custom numeric size - store as custom\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\ttitleFontSize: '',\n\t\t\t\t\t\t\t\t\ttitleFontSizeCustom: newFontSize \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (newFontSize === undefined) {\n\t\t\t\t\t\t\t\t// Clear font size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\ttitleFontSize: '',\n\t\t\t\t\t\t\t\t\ttitleFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement('h4', { style: { marginTop: '20px', marginBottom: '10px' } }, __('Rating Text Font Size')),\n\t\t\t\t\tcreateElement(FontSizePicker, {\n\t\t\t\t\t\t__next40pxDefaultSize: true,\n\t\t\t\t\t\tfontSizes: fontSizes,\n\t\t\t\t\t\tvalue: ratingTextFontSizeCustom || (ratingTextFontSize ? fontSizes.find(fs => fs.slug === ratingTextFontSize)?.size : undefined),\n\t\t\t\t\t\tonChange: (newFontSize) => {\n\t\t\t\t\t\t\t// Handle preset font sizes\n\t\t\t\t\t\t\tconst preset = fontSizes.find(fs => fs.size === newFontSize);\n\t\t\t\t\t\t\tif (preset) {\n\t\t\t\t\t\t\t\t// Preset selected\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\tratingTextFontSize: preset.slug,\n\t\t\t\t\t\t\t\t\tratingTextFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (typeof newFontSize === 'number') {\n\t\t\t\t\t\t\t\t// Custom numeric size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\tratingTextFontSize: '',\n\t\t\t\t\t\t\t\t\tratingTextFontSizeCustom: newFontSize \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (newFontSize === undefined) {\n\t\t\t\t\t\t\t\t// Clear font size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\tratingTextFontSize: '',\n\t\t\t\t\t\t\t\t\tratingTextFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement('h4', { style: { marginTop: '20px', marginBottom: '10px' } }, __('Reviews Font Size')),\n\t\t\t\t\tcreateElement(FontSizePicker, {\n\t\t\t\t\t\t__next40pxDefaultSize: true,\n\t\t\t\t\t\tfontSizes: fontSizes,\n\t\t\t\t\t\tvalue: reviewsFontSizeCustom || (reviewsFontSize ? fontSizes.find(fs => fs.slug === reviewsFontSize)?.size : undefined),\n\t\t\t\t\t\tonChange: (newFontSize) => {\n\t\t\t\t\t\t\t// Handle preset font sizes\n\t\t\t\t\t\t\tconst preset = fontSizes.find(fs => fs.size === newFontSize);\n\t\t\t\t\t\t\tif (preset) {\n\t\t\t\t\t\t\t\t// Preset selected\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\treviewsFontSize: preset.slug,\n\t\t\t\t\t\t\t\t\treviewsFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (typeof newFontSize === 'number') {\n\t\t\t\t\t\t\t\t// Custom numeric size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\treviewsFontSize: '',\n\t\t\t\t\t\t\t\t\treviewsFontSizeCustom: newFontSize \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (newFontSize === undefined) {\n\t\t\t\t\t\t\t\t// Clear font size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\treviewsFontSize: '',\n\t\t\t\t\t\t\t\t\treviewsFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement('h4', { style: { marginTop: '20px', marginBottom: '10px' } }, __('Review Time Font Size')),\n\t\t\t\t\tcreateElement(FontSizePicker, {\n\t\t\t\t\t\t__next40pxDefaultSize: true,\n\t\t\t\t\t\tfontSizes: fontSizes,\n\t\t\t\t\t\tvalue: reviewTimeFontSizeCustom || (reviewTimeFontSize ? fontSizes.find(fs => fs.slug === reviewTimeFontSize)?.size : undefined),\n\t\t\t\t\t\tonChange: (newFontSize) => {\n\t\t\t\t\t\t\t// Handle preset font sizes\n\t\t\t\t\t\t\tconst preset = fontSizes.find(fs => fs.size === newFontSize);\n\t\t\t\t\t\t\tif (preset) {\n\t\t\t\t\t\t\t\t// Preset selected\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\treviewTimeFontSize: preset.slug,\n\t\t\t\t\t\t\t\t\treviewTimeFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (typeof newFontSize === 'number') {\n\t\t\t\t\t\t\t\t// Custom numeric size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\treviewTimeFontSize: '',\n\t\t\t\t\t\t\t\t\treviewTimeFontSizeCustom: newFontSize \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (newFontSize === undefined) {\n\t\t\t\t\t\t\t\t// Clear font size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\treviewTimeFontSize: '',\n\t\t\t\t\t\t\t\t\treviewTimeFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement('h4', { style: { marginTop: '20px', marginBottom: '10px' } }, __('Stars Font Size')),\n\t\t\t\t\tcreateElement(FontSizePicker, {\n\t\t\t\t\t\t__next40pxDefaultSize: true,\n\t\t\t\t\t\tfontSizes: fontSizes,\n\t\t\t\t\t\tvalue: starsFontSizeCustom || (starsFontSize ? fontSizes.find(fs => fs.slug === starsFontSize)?.size : undefined),\n\t\t\t\t\t\tonChange: (newFontSize) => {\n\t\t\t\t\t\t\t// Handle preset font sizes\n\t\t\t\t\t\t\tconst preset = fontSizes.find(fs => fs.size === newFontSize);\n\t\t\t\t\t\t\tif (preset) {\n\t\t\t\t\t\t\t\t// Preset selected\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\tstarsFontSize: preset.slug,\n\t\t\t\t\t\t\t\t\tstarsFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (typeof newFontSize === 'number') {\n\t\t\t\t\t\t\t\t// Custom numeric size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\tstarsFontSize: '',\n\t\t\t\t\t\t\t\t\tstarsFontSizeCustom: newFontSize \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (newFontSize === undefined) {\n\t\t\t\t\t\t\t\t// Clear font size\n\t\t\t\t\t\t\t\tsetAttributes({ \n\t\t\t\t\t\t\t\t\tstarsFontSize: '',\n\t\t\t\t\t\t\t\t\tstarsFontSizeCustom: undefined \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t\t\tcreateElement(PanelBody, {\n\t\t\t\t\ttitle: __('Colors'),\n\t\t\t\t\tinitialOpen: false\n\t\t\t\t},\n\t\t\t\t\tcreateElement(PanelColorSettings, {\n\t\t\t\t\t\ttitle: __('Color Settings'),\n\t\t\t\t\t\tinitialOpen: false,\n\t\t\t\t\t\tcolorSettings: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: backgroundColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ backgroundColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Block Background Color')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ textColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Default Text Color')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(PanelColorSettings, {\n\t\t\t\t\t\ttitle: __('Title Colors'),\n\t\t\t\t\t\tinitialOpen: false,\n\t\t\t\t\t\tcolorSettings: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: titleTextColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ titleTextColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Title Text Color')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: titleBackgroundColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ titleBackgroundColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Title Background Color')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(PanelColorSettings, {\n\t\t\t\t\t\ttitle: __('Rating Colors'),\n\t\t\t\t\t\tinitialOpen: false,\n\t\t\t\t\t\tcolorSettings: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: ratingTextColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ ratingTextColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Rating Text Color')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: ratingBackgroundColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ ratingBackgroundColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Rating Background Color')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(PanelColorSettings, {\n\t\t\t\t\t\ttitle: __('Reviews Colors'),\n\t\t\t\t\t\tinitialOpen: false,\n\t\t\t\t\t\tcolorSettings: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: reviewsTextColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ reviewsTextColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Reviews Text Color')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: reviewsBackgroundColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ reviewsBackgroundColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Reviews Background Color')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(PanelColorSettings, {\n\t\t\t\t\t\ttitle: __('Review Time Colors'),\n\t\t\t\t\t\tinitialOpen: false,\n\t\t\t\t\t\tcolorSettings: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: reviewTimeTextColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ reviewTimeTextColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Review Time Text Color')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: reviewTimeBackgroundColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ reviewTimeBackgroundColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Review Time Background Color')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(PanelColorSettings, {\n\t\t\t\t\t\ttitle: __('Stars Colors'),\n\t\t\t\t\t\tinitialOpen: false,\n\t\t\t\t\t\tcolorSettings: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: starsTextColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ starsTextColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Stars Color')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: starsBackgroundColor,\n\t\t\t\t\t\t\t\tonChange: (value) => setAttributes({ starsBackgroundColor: value }),\n\t\t\t\t\t\t\t\tlabel: __('Stars Background Color')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif (loading) {\n\t\t\t\treturn [\n\t\t\t\t\tinspectorControls,\n\t\t\t\t\tstyleControls,\n\t\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\tclassName: 'google-reviews-block loading',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackgroundColor: backgroundColor,\n\t\t\t\t\t\t\tcolor: textColor\n\t\t\t\t\t\t}\n\t\t\t\t\t}, __('Loading Google Reviews...'))\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif (error) {\n\t\t\t\treturn [\n\t\t\t\t\tinspectorControls,\n\t\t\t\t\tstyleControls,\n\t\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\t\tclassName: 'google-reviews-block error',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tbackgroundColor: backgroundColor,\n\t\t\t\t\t\t\t\tcolor: textColor,\n\t\t\t\t\t\t\t\ttextAlign: alignment\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreateElement('p', {}, __('Error: ') + error),\n\t\t\t\t\t\tcreateElement('p', {}, __('Please check your settings in Settings → Google Reviews'))\n\t\t\t\t\t)\n\t\t\t\t];\n\t\t\t}\n\n\n\t\t\treturn [\n\t\t\t\tinspectorControls,\n\t\t\t\tstyleControls,\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\tclassName: 'google-reviews-block',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackgroundColor: backgroundColor,\n\t\t\t\t\t\t\tcolor: textColor\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tshowTitle !== false ? createElement('div', { className: 'review-header' },\n\t\t\t\t\t\tcreateElement('h3', {\n\t\t\t\t\t\t\tclassName: titleClass,\n\t\t\t\t\t\t\tstyle: titleStyle,\n\t\t\t\t\t\t\tdangerouslySetInnerHTML: { \n\t\t\t\t\t\t\t\t__html: this.sanitizeHtml(overrideTitle || reviews.name)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t) : null,\n\t\t\t\t\tcreateElement('div', { \n\t\t\t\t\t\tclassName: 'review-rating',\n\t\t\t\t\t\tstyle: ratingSectionStyle\n\t\t\t\t\t},\n\t\t\t\t\t\tcreateElement('span', { className: 'rating-number' }, reviews.rating.toFixed(1)),\n\t\t\t\t\t\tcreateElement('span', { \n\t\t\t\t\t\t\tclassName: 'stars ' + starsClass,\n\t\t\t\t\t\t\tstyle: starsStyle \n\t\t\t\t\t\t}, this.renderStars(reviews.rating, starsTextColor, starsFontSizeValue)),\n\t\t\t\t\t\t(showRatingText !== false && !ratingTextBelow) ? (\n\t\t\t\t\t\t\tcustomRatingText \n\t\t\t\t\t\t\t\t? createElement('span', { \n\t\t\t\t\t\t\t\t\tclassName: 'rating-count ' + ratingTextClass,\n\t\t\t\t\t\t\t\t\tstyle: ratingTextStyle,\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: { \n\t\t\t\t\t\t\t\t\t\t__html: this.sanitizeHtml(customRatingText.replace('$review_count', reviews.total_ratings))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t: createElement('span', { \n\t\t\t\t\t\t\t\t\tclassName: 'rating-count ' + ratingTextClass,\n\t\t\t\t\t\t\t\t\tstyle: ratingTextStyle\n\t\t\t\t\t\t\t\t}, '(' + reviews.total_ratings + ' reviews)')\n\t\t\t\t\t\t) : null\n\t\t\t\t\t),\n\t\t\t\t\t(showRatingText !== false && ratingTextBelow) ? (\n\t\t\t\t\t\tcustomRatingText \n\t\t\t\t\t\t\t? createElement('div', { \n\t\t\t\t\t\t\t\tclassName: 'rating-count-below ' + ratingTextClass,\n\t\t\t\t\t\t\t\tstyle: ratingTextStyle,\n\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: { \n\t\t\t\t\t\t\t\t\t__html: this.sanitizeHtml(customRatingText.replace('$review_count', reviews.total_ratings))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: createElement('div', { \n\t\t\t\t\t\t\t\tclassName: 'rating-count-below ' + ratingTextClass,\n\t\t\t\t\t\t\t\tstyle: ratingTextStyle\n\t\t\t\t\t\t\t}, '(' + reviews.total_ratings + ' reviews)')\n\t\t\t\t\t) : null,\n\t\t\t\t\tshowReviewContent && reviews && reviews.reviews && reviews.reviews.length > 0 ?\n\t\t\t\t\t\tcreateElement('div', { className: 'reviews-container' },\n\t\t\t\t\t\t\tcreateElement('div', { className: 'reviews-sort-info' },\n\t\t\t\t\t\t\t\tcreateElement('small', {}, 'Sorted by: ' + (reviewsSort === 'newest' ? 'Most Recent' : 'Most Relevant'))\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcreateElement('div', { \n\t\t\t\t\t\t\t\tclassName: 'individual-reviews ' + reviewsClass,\n\t\t\t\t\t\t\t\tstyle: reviewsStyle\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\treviews.reviews.slice(0, maxReviews).map((review, index) =>\n\t\t\t\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\t\t\t\tkey: index,\n\t\t\t\t\t\t\t\t\tclassName: 'review-item'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcreateElement('div', { className: 'review-header' },\n\t\t\t\t\t\t\t\t\tcreateElement('div', { className: 'reviewer-info' },\n\t\t\t\t\t\t\t\t\t\treview.profile_photo_url ? createElement('img', {\n\t\t\t\t\t\t\t\t\t\t\tsrc: review.profile_photo_url,\n\t\t\t\t\t\t\t\t\t\t\talt: review.author_name,\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'reviewer-photo'\n\t\t\t\t\t\t\t\t\t\t}) : null,\n\t\t\t\t\t\t\t\t\t\tcreateElement('div', { className: 'reviewer-details' },\n\t\t\t\t\t\t\t\t\t\t\tcreateElement('span', { \n\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'reviewer-name',\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: reviewsStyle\n\t\t\t\t\t\t\t\t\t\t\t}, review.author_name),\n\t\t\t\t\t\t\t\t\t\t\tcreateElement('div', { className: 'review-rating-individual' },\n\t\t\t\t\t\t\t\t\t\t\t\tcreateElement('div', { \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'stars ' + starsClass,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: starsStyle\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.renderStars(review.rating, starsTextColor, starsFontSizeValue)\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tcreateElement('span', { \n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'review-time ' + reviewTimeClass,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: reviewTimeStyle\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.formatReviewTime(review.time)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\treview.text ? createElement('div', { \n\t\t\t\t\t\t\t\t\tclassName: 'review-text',\n\t\t\t\t\t\t\t\t\tstyle: reviewsStyle,\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML: { __html: review.text.replace(/\\n/g, '<br />') }\n\t\t\t\t\t\t\t\t}) : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t) : null,\n\t\t\t\t\tshowLink && (overrideUrl || (reviews && reviews.url)) ? createElement('div', { className: 'review-link' },\n\t\t\t\t\t\tcreateElement('a', {\n\t\t\t\t\t\t\thref: overrideUrl || reviews.url,\n\t\t\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\t\t\trel: 'noopener'\n\t\t\t\t\t\t}, __('See All Reviews on Google'))\n\t\t\t\t\t) : null\n\t\t\t\t)\n\t\t\t];\n\t\t}\n\n\t\tsanitizeHtml(html) {\n\t\t\t// Basic HTML sanitization for allowed tags\n\t\t\t// This is a simple implementation - the server-side wp_kses provides the real security\n\t\t\tconst allowedTags = ['p', 'a', 'br', 'strong', 'em'];\n\t\t\tconst tempDiv = document.createElement('div');\n\t\t\ttempDiv.innerHTML = html;\n\t\t\t\n\t\t\t// Remove script tags and other dangerous elements\n\t\t\tconst scripts = tempDiv.querySelectorAll('script, style, iframe, object, embed');\n\t\t\tscripts.forEach(el => el.remove());\n\t\t\t\n\t\t\t// Remove event handlers\n\t\t\tconst allElements = tempDiv.querySelectorAll('*');\n\t\t\tallElements.forEach(el => {\n\t\t\t\tfor (let attr of el.attributes) {\n\t\t\t\t\tif (attr.name.startsWith('on')) {\n\t\t\t\t\t\tel.removeAttribute(attr.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn tempDiv.innerHTML;\n\t\t}\n\n\n\t\tformatReviewTime(timestamp) {\n\t\t\tconst reviewDate = new Date(timestamp * 1000);\n\t\t\tconst now = new Date();\n\t\t\tconst daysAgo = Math.floor((now - reviewDate) / (24 * 60 * 60 * 1000));\n\n\t\t\tif (daysAgo < 7) {\n\t\t\t\tif (daysAgo === 0) {\n\t\t\t\t\treturn 'Today';\n\t\t\t\t} else if (daysAgo === 1) {\n\t\t\t\t\treturn 'Yesterday';\n\t\t\t\t} else {\n\t\t\t\t\treturn daysAgo + ' days ago';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn reviewDate.toLocaleDateString('en-US', {\n\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\tmonth: 'long',\n\t\t\t\t\tday: 'numeric'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tregisterBlockType('google-reviews/display', {\n\t\ttitle: __('Google Reviews'),\n\t\tdescription: __('Display your Google business reviews with overall rating'),\n\t\ticon: 'star-filled',\n\t\tcategory: 'widgets',\n\t\tkeywords: [\n\t\t\t__('google'),\n\t\t\t__('reviews'),\n\t\t\t__('rating'),\n\t\t\t__('business')\n\t\t],\n\t\tattributes: {\n\t\t\tshowLink: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\tshowReviewContent: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tmaxReviews: {\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: 5\n\t\t\t},\n\t\t\talignment: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: 'left'\n\t\t\t},\n\t\t\tbackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '#f9f9f9'\n\t\t\t},\n\t\t\ttextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '#333333'\n\t\t\t},\n\t\t\t// Individual color controls\n\t\t\ttitleTextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\ttitleBackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tratingTextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tratingBackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\treviewsTextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\treviewsBackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\treviewsSort: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: 'most_relevant'\n\t\t\t},\n\t\t\toverrideUrl: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\toverrideTitle: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tcustomRatingText: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tshowTitle: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\tshowRatingText: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\tratingTextBelow: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\ttitleFontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\ttitleFontSizeCustom: {\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tratingTextFontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tratingTextFontSizeCustom: {\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\treviewsFontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\treviewsFontSizeCustom: {\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\treviewTimeFontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\treviewTimeFontSizeCustom: {\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\treviewTimeTextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\treviewTimeBackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tstarsFontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tstarsFontSizeCustom: {\n\t\t\t\ttype: 'number',\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tstarsTextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tstarsBackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: ''\n\t\t\t}\n\t\t},\n\t\tedit: GoogleReviewsEdit,\n\t\tsave: function() {\n\t\t\t// Server-side rendering\n\t\t\treturn null;\n\t\t}\n\t});\n\n})(\n\twindow.wp.blocks,\n\twindow.wp.element,\n\twindow.wp.blockEditor || window.wp.editor,\n\twindow.wp.components,\n\twindow.wp.i18n,\n\twindow.wp.data\n);\n"]}